## Bootstrap
```
docker compose up
```
Warning: перед использованием нужно сначала создать restaraunta и tables для них. Это можно сделать в техническом эндпоинте Booking Service напрямую через Swagger.
### Swagger
http://localhost:3002/docs
http://localhost:3001/docs
### Logs UI
http://localhost:8085

## Описание системы
Поскольку задание было достаточно абстрактным и задать вопросы возможности не было, были приняты следующие технические решения:
- Сервисы выполнены в DDD с примесью hexagonal для эндпоинтов. Глобальный layout - monorepo. Инфраструктурные хелперы и контракты (ивенты/dto) перенесены в общую библиотеку.
-  Понятие "booking" с точки зрения бизнес-логики было разделено на 2 отдельные сущности: BookingRequest - заявка пользователя со своим жизненным циклом (за неё в ответе API service, так как это ближе к ТЗ), и сам Booking - резервация в системе.
- BookingRequest обрабатывается следующим образом: для указанного ресторана осуществляется поиск наименьшего столика, который может вместить требуемое число людей. Если такого нет, то отказ. Затем выполняется бронирование: если место столик на время t занят, то отказ. Имело бы смысл бронировать на временной интервал, но как условность тестового задания время может быть любым.
- API сервис, формально, выступает в качестве оркестратора мини-саги бронирования: он слушает ивенты в системе и контролирует статус BookingRequestEntity, являясь его system of record.

## Предложения по улучшению
- Сделать Outbox - это необходимо для корректности систем, где с изменением статуса в базе данных должен выкидываться ивент.
- Сделать DLQ для ивентов и стандартизированный error-handling.
- Решить проблему с concurrency в логике бронирования. Из-за специфики текущего алгоритма подбора столиков самым выгодным и простым вариантом будет advisory lock в самой БД.
- Отделить менеджмент запроса на резервацию от ApiService. Если мы представим, что система будет расширяться, то без четкого scope of responsibility она быстро превратится в кашу. Лучше либо объединить этот функционал с BookingService и избавиться от саги, либо выделить отдельный сервис - зависит от вектора развития.
В любом случае, api сервису лучше остаться тонкой прослойкой - асинхронность системы от этого не уменьшится, так как можно попросту кидать запрос в в кафку без сохранения его в ещё одно хранилище данных.
